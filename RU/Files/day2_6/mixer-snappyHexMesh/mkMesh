#!/bin/sh
rm -rf *.log

# - meshing

blockMesh

snappyHexMesh -overwrite | tee -a snappy.log


# - generate face/cell sets and zones
topoSet -dict system/removeZones.topoSetDict | tee -a remove.log

topoSet -dict system/ami.topoSetDict | tee -a createAmi.log

# - create the AMI faces by creating baffles, and then splitting the mesh
changeDictionary  | tee -a createAmi.log

# force removal of fields generated by snappy
\rm -rf 0

createBaffles -internalFacesOnly -overwrite ami '(ami_inside ami_outside)'  | tee -a createAmi.log

mergeOrSplitBaffles -split -overwrite  | tee -a createAmi.log


# - apply the initial fields

cp -rf 0.org 0
